---
layout: single
title: "#5. [고전 C++ 가이드] 유효 범위"
categories: "classic-cpp-guide"
tag: ["cpp"]
author_profile: false
sidebar: 
    nav: "docs"
---

> * 이름의 유효 범위는 짧게 유지하라.
> * 블록을 이용하여 변수의 유효 범위를 짧게 유지하라.

**개요**

전역 변수의 경우에는 전체 범위에 영향을 주며,
클래스, 함수, 네임스페이스, 열거형, `try-catch()`, 임의 작성한 블록문 범위 내에서만 영향을 줍니다.

변수의 유효 범위는 블록의 시작과 끝이며, 이름이 동일한 경우 가까운 곳이 먼곳을 가립니다. 다음은 전역변수, 함수의 지역변수, 블록내에 정의된 변수가 어떻게 사용될 수 있는지 보여주는 예입니다.

```cpp
namespace {
    int x = 1; // 전역 변수. namespace 내에 있어 현 파일에서만 접근 가능
}

TEST(TestClassicCpp, Scope) {
    EXPECT_TRUE(x == 1); // 전역 변수
    int x = 2; 
    EXPECT_TRUE(x == 2); // 지역변수가 전역 x를 가림
    {
        int x = 3;
        EXPECT_TRUE(x == 3); // 블록이 지역 x를 가림
        ::x = 10; // :: 붙여 강제로 전역 접근
    } 
    EXPECT_TRUE(x == 2); // 지역 변수
    EXPECT_TRUE(::x == 10); // 전역 변수
}
```

**좋은 습관**

1. 코드 라인이 길어지면 동일한 이름을 사용하게 될 확률이 높습니다. 이름이 서로 가리지 않도록 이름의 유효 범위를 짧게 유지하는게 좋습니다.
2. 함수가 기나 길고, 함수 앞단에 변수 정의를 해두는 건 좋지 않습니다. 나중에 위아래 스크롤하시기 바빠질 수 있습니다.(변수명이 뭐였지? 자료형이 뭐였지? 그냥 헝가리언 표기를 할까? 언제 초기화 됐지? 언제 값이 바뀌지?)
 
    ```cpp
    void f() {
        int a;
        int b;
        ...
        int z;

        // a~z를 사용하는 코드들
    }
    ```

    상기와 같다면, 유효범위를 짧게 해서 블록화 해보세요.

    ```cpp
    
    void f() {
        {
            int a;
            int b;
            // a와 b만 사용하는 코드들
        }
        {
            int c;
            int d;
            // c와 d만 사용하는 코드들
        }
    }
    ```

    다행히 상기처럼 깔끔하게 나눠진다면, 각 블록을 함수화 하시길 바랍니다.
