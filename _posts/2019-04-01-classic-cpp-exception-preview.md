---
layout: single
title: "#1. [고전 C++ 가이드] 예외 안정 미리보기"
categories: "classic-cpp-exception"
tag: ["cpp"]
author_profile: false
sidebar: 
    nav: "docs"
---

# 개요

예외 안정 프로그래밍은 예외가 발생하지 않도록 프로그래밍 하는 것이 아니라(이건 사실 불가능합니다. 메모리가 부족할 수도 있고, 갑자기 랜선이 차단될 수도 있고), 예외가 발생해도 안정적으로 복원되고 동작할 수 있도록 프로그래밍 하는 것입니다.

예외가 발생하더라도 안정적으로 동작하게 하는것
모든 함수는 실패할 수 있다고 전재

# 예외 안정의 오해

예외발생을 하지 않게 작성하는 것이다. -> 불가능하다.
try - catch를 사용하거나 사용하지 않는 것이다.


# 일반적인 예외 상황

메모리 할당 실패
특별히 할 수 있는게 없다., 단 100000000G를 할당 요청했는데 실패했다면? 뭔가 할게 있을꺼다.

컬렉션의 잘못 참조된 인덱스
대처할 수 있는 곳에서 잘못된 인덱스 인지 검사하고, 유효한 인덱스가 되도록 보정한다. 혹은 아무짓도 안한다. 혹은 마지막 원소를 사용한다. 혹은 기본 동작을 수행한다.

잘못 전달된 인자
프로그래머의 실수일 확률이 높음. ASSERT 를 공격적으로 사용할 것
NULL검사 -> Null 인 경우가 없다면 레퍼런스를 쓸 것, 경계값 검사
스스로 보정할 수 있는 값으로 변경

오버 플로우/연산오류

안전한 연산인지 검사
재귀 호출 안정성 검사
0으로 나누기. 0으로 나누게 될때의 동작을 예측할 것

인프라 오류

파일, 네트웍 등

# 예외 상황의 잘못된 대처

프로그램을 종료한다.
좀 무책임하지 않은가?

별 신경 쓰지 않는다.
프로그램이 죽든, 개발자가 죽든...

에러를 나타내는 값을 리턴한다, 혹은 전역 에러 코드를 세팅한다.
리턴된 에러는 대부분 무시될 확률이 높다. 
특히 전역 에러코드 세팅은 최악이다.(호출한 곳에서 에러 확인할 확률 1%. GetLastError())

현 함수를 정상적으로 종료시킨다. if (condition) return;
현 함수 종료후에 시스템이 정말 계속 안정적으로 돌아갈까?
이상한 방향으로 폭주하지는 않을까?

에러가 발생한 경우 호출할 함수를 호출한다.
고맙다. 신경 써 줘서... 하지만 어떻게 호출하지? 도대체 에러 보고는 어떻게 해야 하는거야?

# 예외 상황의 올바른 대처

현 함수에서 예측할 수 있는 모든 상황을 고려하라. 
기본 보증과 강한 보증을 수행하라.

예외대처 순서도.

기본 생성자는 피하라.
복사 생성자/대입 연산자의 컴파일 버전
소멸자에서 예외 발생 금지
Swap에서 예외 발생 금지
[완전한 생성자](https://tango1202.github.io/classic-cpp-oop/classic-cpp-oop-complete-class/#%EC%99%84%EC%A0%84%ED%95%9C-%EC%83%9D%EC%84%B1%EC%9E%90) 자원 획득과 초기화를 한번에



예외 안정 함수의 제어구조
사전에 정상적인 조건인지 확인후 실행할것
---





---


---


